language: node_js

node_js:
- "node"

cache:
  directories:
  - node_modules

env:
  global:
  - GEMFURY_USER=hoot-hoot
  # GEMFURY_API_KEY
  - secure: "a/jEa/Vz+YWFcTkgz+CFacdBIrsEti8/QOu31v0KLsZgEq23Rd+HIAN42KPsza2iZcIOpFcmmcQOOemHL7K1YocJ+Wo/xoip3T9xaP/bCs+2EyRGdGOrekpRn17p8HKDb4vGv/+aD1iYShNNYQBjEr4Lg134X12Fq/MHTJS0y2kHAXMc0iFDJ3jt4nQk6Abaj7kakHu0gvuvVretH0UJk9c9H76BeULgOYYNkoME+cjTpmYfu8/rJ1cyEKgWivnmtlNN8Z65uQguY9cQTjGjcLa/bTt0+g2X0wKXTx/wug5iF5LudBRfdeuRLnNApCKBiVSeqOqruGglh7XwtYNW6LA2arvQA3c5OrzlwO26mF/U3jeFBNMVCJH5i3oKzOnydgmNKvr+mVjcuqpW8YB/ESMM0vABdlebm1vliIl8idGKHHQ8xyXUhSpTO9RiKb3FDl7ghQiFM3cgAAFK72ONItavz4MVKVrj8JgbCDqjPbdJJ3ILy92Dcw/5Syci4pwNKVLUaZ0ubsLrYYvnCPZM7gCG0n/rjutzJlI5+/7N+vY4XNV1KcjzRGfphb6WvMXeZpzBd2Y/kJbY9Hiz5eXiYXQD2e4Q3tMIG7tWJKML+EvhMaDu5+G2jUF71iiMX1tPNW4RP9CLeoacyRupjQ+/19srrpshDdpHhuUyO2CuP0U="

install:
- npm install --registry=https://npm-proxy.fury.io/${GEMFURY_API_KEY}/${GEMFURY_USER}/ --progress=false

script:
- true

deploy:
- provider: script
  skip_cleanup: true
  script: ./src/togemfury.sh --user ${GEMFURY_USER} --api_key ${GEMFURY_API_KEY}
  on:
    tags: true
